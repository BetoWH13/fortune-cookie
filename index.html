<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misfortune Cookies</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 800px;
            background-color: #2a2a2a;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #e74c3c;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .cookie {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fortune {
            font-size: 1.5rem;
            font-style: italic;
            line-height: 1.4;
        }

        button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #c0392b;
        }

        .description {
            margin-top: 30px;
            font-size: 0.9rem;
            color: #aaa;
            line-height: 1.5;
        }

        .footer {
            margin-top: 40px;
            font-size: 0.8rem;
            color: #777;
            border-top: 1px solid #444;
            padding-top: 15px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Misfortune Cookies</h1>

        <div class="cookie">
            <p id="fortune" class="fortune">Click the button to crack open your misfortune cookie...</p>
        </div>

        <button id="generateBtn">Crack Open a Cookie</button>

        <div class="description">
            <p>Welcome to Misfortune Cookies, where we serve up deliberately bleak, darkly funny, and emotionally unsettling fortune cookie messages. Our cookies are crafted with cynicism, passive aggression, and existential dread - perfect for those who prefer their wisdom with a side of discomfort.</p>
        </div>

        <div class="footer">
            <p>DISCLAIMER: This site is for humor purposes only. Some quotes were generated using AI. Please don't take any of these messages seriously - they're meant to be darkly humorous, not actual predictions or advice.</p>
        </div>
    </div>

    <!-- Store the prompt for reference and documentation -->
    <script>
        // The prompt used to generate the misfortunes
        const misfortunePrompt = `Write a deliberately bleak, darkly funny, or emotionally unsettling fortune cookie message, as if the writer were subtly sabotaging the recipient under the guise of ancient wisdom. The tone should mimic traditional fortune cookies—brief, declarative, and slightly mystical—but twisted toward pessimism, passive aggression, or existential dread. Imagine this was written by a cynical oracle or a disgruntled employee at the fortune cookie factory trying to inject discomfort into dinner. Avoid outright cruelty or profanity—make it feel believable yet wrong, just enough to make someone frown, laugh nervously, or reflect uncomfortably. The ideal misfortune should be short (under 20 words), dryly impersonal, and leave the reader slightly worse off than before.`;
    </script>

    <!-- Import the misfortunes collection from external file -->
    <script type="module">
        // Import the misfortunes collection
        import misfortunes from './misfortunes.js';

        // Track which misfortunes have been shown in this session
        const shownMisfortunes = new Set();

        document.getElementById('generateBtn').addEventListener('click', function() {
            // If we've shown all misfortunes, reset the tracking
            if (shownMisfortunes.size >= misfortunes.length - 5) {
                shownMisfortunes.clear();
            }

            // Find a misfortune that hasn't been shown yet
            let randomIndex;
            let attempts = 0;
            do {
                randomIndex = Math.floor(Math.random() * misfortunes.length);
                attempts++;
                // Prevent infinite loop if all misfortunes have been shown
                if (attempts > 50) break;
            } while (shownMisfortunes.has(randomIndex));

            // Mark this misfortune as shown
            shownMisfortunes.add(randomIndex);

            // Display the misfortune
            document.getElementById('fortune').textContent = misfortunes[randomIndex];
        });
    </script>
</body>
</html>
